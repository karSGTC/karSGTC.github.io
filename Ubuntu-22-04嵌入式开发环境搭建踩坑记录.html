<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Ubuntu 22.04嵌入式开发环境搭建踩坑记录 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="设备：联想拯救者 Y7000P 2019  硬盘结构：   1TB NVMe：Windows 10  128GB SATA：Ubuntu 22.04（独立安装）  定位：Linux 嵌入式 &#x2F; 交叉编译 &#x2F; SoC BSP &#x2F; Yocto 真实踩坑记录 + 原理复盘 Win + Linux 物理双盘  一、Ubuntu 22.04 而不是 24.04 2026 时间">
<meta property="og:type" content="website">
<meta property="og:title" content="Ubuntu 22.04嵌入式开发环境搭建踩坑记录">
<meta property="og:url" content="http://example.com/Ubuntu-22-04%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="设备：联想拯救者 Y7000P 2019  硬盘结构：   1TB NVMe：Windows 10  128GB SATA：Ubuntu 22.04（独立安装）  定位：Linux 嵌入式 &#x2F; 交叉编译 &#x2F; SoC BSP &#x2F; Yocto 真实踩坑记录 + 原理复盘 Win + Linux 物理双盘  一、Ubuntu 22.04 而不是 24.04 2026 时间">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2026-02-07T11:52:06.000Z">
<meta property="article:modified_time" content="2026-02-07T12:13:46.911Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 8.1.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="page-" class="h-entry article article-type-page" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/Ubuntu-22-04%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95.html" class="article-date">
  <time class="dt-published" datetime="2026-02-07T11:52:06.000Z" itemprop="datePublished">2026-02-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Ubuntu 22.04嵌入式开发环境搭建踩坑记录
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p> 设备：联想拯救者 Y7000P 2019</p>
<p> 硬盘结构：</p>
<p>  1TB NVMe：Windows 10<br>  128GB SATA：Ubuntu 22.04（独立安装）</p>
<p> 定位：Linux 嵌入式 &#x2F; 交叉编译 &#x2F; SoC BSP &#x2F; Yocto</p>
<p>真实踩坑记录 + 原理复盘<br> Win + Linux 物理双盘</p>
<hr>
<h2 id="一、Ubuntu-22-04-而不是-24-04"><a href="#一、Ubuntu-22-04-而不是-24-04" class="headerlink" title="一、Ubuntu 22.04 而不是 24.04"></a>一、Ubuntu 22.04 而不是 24.04</h2><p> 2026 时间点，嵌入式工程师默认首选 Ubuntu 22.04，除非全新项目 + 全新硬件。</p>
<h3 id="1-工具链与-SDK-现实问题"><a href="#1-工具链与-SDK-现实问题" class="headerlink" title="1. 工具链与 SDK 现实问题"></a>1. 工具链与 SDK 现实问题</h3><p>大量芯片原厂 SDK（NXP &#x2F; TI &#x2F; Rockchip &#x2F; 海思 &#x2F; 全志）：</p>
<p> 编译于 glibc 2.31 ~ 2.35<br> 假设宿主机是 Ubuntu 20.04 &#x2F; 22.04</p>
<p>Ubuntu 24.04 使用 glibc 2.39，典型问题：</p>
<p> <code>GLIBC_2.34 not found</code><br> 老交叉编译器直接无法运行</p>
<p>22.04 工业兼容性最佳”。</p>
<h3 id="2-Yocto-BSP-支持现实"><a href="#2-Yocto-BSP-支持现实" class="headerlink" title="2. Yocto &#x2F; BSP 支持现实"></a>2. Yocto &#x2F; BSP 支持现实</h3><table>
<thead>
<tr>
<th>项目</th>
<th>推荐宿主机</th>
</tr>
</thead>
<tbody><tr>
<td>Yocto Kirkstone (4.0 LTS)</td>
<td>Ubuntu 22.04</td>
</tr>
<tr>
<td>老 BSP &#x2F; Vendor SDK</td>
<td>Ubuntu 22.04</td>
</tr>
<tr>
<td>Yocto Scarthgap (5.0)</td>
<td>Ubuntu 24.04</td>
</tr>
</tbody></table>
<p>结论：</p>
<p> 优先 22.04，再考虑 24.04。</p>
<hr>
<h2 id="二、硬盘规划：把-Ubuntu-装到-128GB-SATA"><a href="#二、硬盘规划：把-Ubuntu-装到-128GB-SATA" class="headerlink" title="二、硬盘规划：把 Ubuntu 装到 128GB SATA"></a>二、硬盘规划：把 Ubuntu 装到 128GB SATA</h2><h3 id="1-物理隔离的好处"><a href="#1-物理隔离的好处" class="headerlink" title="1. 物理隔离的好处"></a>1. 物理隔离的好处</h3><p> Windows 更新不会破坏 Linux 引导<br> Linux 折腾炸了，不影响 Win<br> GRUB 写坏 ≠ Windows 损坏</p>
<hr>
<h2 id="三、第一个大坑：联网安装-卡在“更新和其他软件”"><a href="#三、第一个大坑：联网安装-卡在“更新和其他软件”" class="headerlink" title="三、第一个大坑：联网安装 卡在“更新和其他软件”"></a>三、第一个大坑：联网安装 卡在“更新和其他软件”</h2><h3 id="表现"><a href="#表现" class="headerlink" title="表现"></a>表现</h3><p> 卡 10 分钟<br> 卡 30 分钟<br> 看起来像死机</p>
<h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><h4 id="1-官方软件源在国外"><a href="#1-官方软件源在国外" class="headerlink" title="1. 官方软件源在国外"></a>1. 官方软件源在国外</h4><p>安装器在后台跑：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br></pre></td></tr></table></figure>

<p>默认连接 <code>archive.ubuntu.com</code>，在国内：</p>
<p> DNS 慢<br> TLS 卡<br> 直接超时</p>
<h4 id="2-NVIDIA-驱动自动探测"><a href="#2-NVIDIA-驱动自动探测" class="headerlink" title="2. NVIDIA 驱动自动探测"></a>2. NVIDIA 驱动自动探测</h4><p>勾选了：</p>
<p> “为图形和 Wi‑Fi 硬件安装第三方软件”</p>
<p>安装器会：</p>
<p> 访问 Canonical Partner 源<br> 匹配 GTX 显卡闭源驱动</p>
<h4 id="3-中文语言包阻塞下载"><a href="#3-中文语言包阻塞下载" class="headerlink" title="3. 中文语言包阻塞下载"></a>3. 中文语言包阻塞下载</h4><p>选了中文，安装器会试图一次性下载：</p>
<p> 中文 locale<br> 输入法<br> 字体</p>
<p>阻塞式下载。</p>
<h3 id="正确解法（推荐）"><a href="#正确解法（推荐）" class="headerlink" title="正确解法（推荐）"></a>正确解法（推荐）</h3><p> 断网安装</p>
<p> 拔网线 &#x2F; 断 Wi‑Fi<br> 重新开始安装<br> 10–15 分钟完成</p>
<hr>
<h2 id="四、大坑：安装结束时报-EFI-错误"><a href="#四、大坑：安装结束时报-EFI-错误" class="headerlink" title="四、大坑：安装结束时报 EFI 错误"></a>四、大坑：安装结束时报 EFI 错误</h2><h3 id="报错核心含义"><a href="#报错核心含义" class="headerlink" title="报错核心含义"></a>报错核心含义</h3><p> <code>/boot/efi 看起来不像是一个 EFI 分区</code></p>
<p> 没有给 GRUB 一个合法的 UEFI 启动位置。</p>
<h3 id="EFI-分区"><a href="#EFI-分区" class="headerlink" title="EFI 分区"></a>EFI 分区</h3><p> 文件系统：FAT32<br> 类型：EFI System Partition<br> 不能是 ext4<br> 不能只是挂载点叫 <code>/boot/efi</code></p>
<hr>
<h2 id="五、分区方案推荐（128GB-SATA）"><a href="#五、分区方案推荐（128GB-SATA）" class="headerlink" title="五、分区方案推荐（128GB SATA）"></a>五、分区方案推荐（128GB SATA）</h2><p>在“安装类型”选择：其他选项 (Something else)</p>
<h3 id="推荐结构"><a href="#推荐结构" class="headerlink" title="推荐结构"></a>推荐结构</h3><table>
<thead>
<tr>
<th>分区</th>
<th>大小</th>
<th>类型</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>EFI</td>
<td>512MB</td>
<td>FAT32</td>
<td>EFI System Partition</td>
</tr>
<tr>
<td>&#x2F;</td>
<td>100GB+</td>
<td>ext4</td>
<td>根文件系统</td>
</tr>
<tr>
<td>swap</td>
<td>8GB</td>
<td>swap</td>
<td>编译防爆内存</td>
</tr>
</tbody></table>
<h3 id="细节"><a href="#细节" class="headerlink" title="细节"></a>细节</h3><p> 安装启动引导器的设备：请选择 <code>/dev/sdX</code>（整块盘）</p>
<p>❌ <code>/dev/sda1</code></p>
<p>✅ <code>/dev/sda</code></p>
<hr>
<h2 id="六、失败（原理复盘）"><a href="#六、失败（原理复盘）" class="headerlink" title="六、失败（原理复盘）"></a>六、失败（原理复盘）</h2><ol>
<li>EFI 分区格式错误（ext4）</li>
<li>分区表不是 GPT</li>
<li>安装器想把 GRUB 写进 NVMe 的 Windows EFI</li>
<li>SATA 盘根本没有 ESP</li>
</ol>
<hr>
<h2 id="七、安装完成"><a href="#七、安装完成" class="headerlink" title="七、安装完成"></a>七、安装完成</h2><h3 id="1-NVIDIA-驱动"><a href="#1-NVIDIA-驱动" class="headerlink" title="1. NVIDIA 驱动"></a>1. NVIDIA 驱动</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ubuntu-drivers autoinstall</span><br><span class="line">nvidia-smi</span><br></pre></td></tr></table></figure>

<h3 id="2-亮度调节失效"><a href="#2-亮度调节失效" class="headerlink" title="2. 亮度调节失效"></a>2. 亮度调节失效</h3><p>修改 <code>/etc/default/grub</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet splash acpi_backlight=vendor&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo update-grub</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="八、避坑清单"><a href="#八、避坑清单" class="headerlink" title="八、避坑清单"></a>八、避坑清单</h2><p> ❌ 不要一开始就联网安装<br> ❌ 不要自动分区<br> ❌ 不要让 GRUB 写进 Windows 盘<br> ✅ EFI 分区必须 FAT32<br> ✅ Ubuntu 22.04 仍然是嵌入式主流<br> ✅ 宿主机 ≠ 目标系统</p>
<hr>
<h2 id="九、建议"><a href="#九、建议" class="headerlink" title="九、建议"></a>九、建议</h2><p> 系统只是工具，不是信仰。</p>
<p> 宿主机可以新<br> 工具链必须稳<br> 环境要可复现</p>
<p>后续整理：</p>
<p> 嵌入式工程师必装软件清单<br> Docker 化交叉编译环境<br> Yocto &#x2F; Buildroot 实战踩坑</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/Ubuntu-22-04%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95.html" data-id="cuidiuPuLCrJi38H-yJAm0CEB" data-title="Ubuntu 22.04嵌入式开发环境搭建踩坑记录" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer><script src="https://giscus.app/client.js"
        data-repo="karSGTC/karSGTC.github.io"
        data-repo-id="R_kgDORKkxiA"
        data-category="Announcements"
        data-category-id="DIC_kwDORKkxiM4C1_7d"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>
  </div>
  
    
  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2026/02/">February 2026</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2026/02/07/Linux-%E9%AB%98%E8%B4%9F%E8%BD%BD%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%AE%9E%E6%88%98%E8%AE%B0%E5%BD%95/">Linux 高负载开发环境搭建</a>
          </li>
        
          <li>
            <a href="/2026/02/07/%E6%8B%AF%E6%95%91%E8%80%85Ubuntu%E8%87%AA%E5%8A%A8%E5%AE%89%E8%A3%85%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8%E5%90%8E%E8%A7%A6%E6%91%B8%E6%9D%BF%E4%B8%8E%E7%BD%91%E5%8D%A1%E5%A4%B1%E6%95%88%E6%8E%92%E9%94%99%E4%B8%8E%E4%BF%AE%E5%A4%8D/">拯救者Ubuntu自动安装显卡驱动后触摸板与网卡失效排错与修复</a>
          </li>
        
          <li>
            <a href="/2026/02/07/Ubuntu-22-04%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/">Ubuntu 22.04嵌入式开发环境搭建踩坑记录</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2026 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>